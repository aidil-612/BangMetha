!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._posthogChunkIds=e._posthogChunkIds||{},e._posthogChunkIds[n]="019a9487-e2b4-7883-b96f-74e101dbed1d")}catch(e){}}();(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,103991,e=>{"use strict";e.s(["getCdnAsset",0,e=>`https://rjdavx8ozyznxeyh.public.blob.vercel-storage.com/production/${e}`])},940335,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.regionAPIs=void 0,s.regionAPIs=new Map([["us","https://api-iam.intercom.io"],["eu","https://api-iam.eu.intercom.io"],["ap","https://api-iam.au.intercom.io"]])},413843,(e,t,s)=>{"use strict";var a=e.e&&e.e.__awaiter||function(e,t,s,a){return new(s||(s=Promise))(function(i,r){function n(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.ref=s.init=void 0;let i="_intercom_npm_loader",r=function(){r.loaderQueue(arguments)};r.q=[],r.loaderQueue=function(e){r.q.push(e)};let n=function(e){var t,s,a=document;if(!a.getElementById(i)){var r=a.createElement("script");r.type="text/javascript",r.async=!0,r.id=i,r.src=e||"https://widget.intercom.io/widget/"+(null==(t=window.intercomSettings)?void 0:t.app_id);var n=a.getElementsByTagName("script")[0];null==(s=n.parentNode)||s.insertBefore(r,n)}},o=()=>"complete"===document.readyState||"interactive"===document.readyState;s.init=(...e)=>a(void 0,[...e],void 0,function*(e={}){var t=window,s=t.Intercom;t.intercomSettings&&(t.intercomSettings.installation_type="npm-package"),"function"==typeof s?(s("reattach_activator"),s("update",t.intercomSettings)):(t.Intercom=r,o()?n(e.widgetUrl):(document.addEventListener("readystatechange",function(){o()&&n(e.widgetUrl)}),t.attachEvent?t.attachEvent("onload",()=>n(e.widgetUrl)):t.addEventListener("load",()=>n(e.widgetUrl),!1)))}),s.ref=void 0},722921,(e,t,s)=>{"use strict";var a=e.e&&e.e.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)0>t.indexOf(a[i])&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]]);return s};Object.defineProperty(s,"__esModule",{value:!0}),s.hideNotifications=s.onUserEmailSupplied=s.showConversation=s.showTicket=s.startChecklist=s.startSurvey=s.showNews=s.showArticle=s.startTour=s.whoami=s.getVisitorId=s.trackEvent=s.onUnreadCountChange=s.onShow=s.onHide=s.showNewMessage=s.showMessages=s.showSpace=s.show=s.hide=s.update=s.shutdown=s.boot=s.Intercom=void 0;let i=e.r(940335),r=e.r(413843),n=(e,...t)=>{if(window.Intercom)return window.Intercom(e,...t);console.warn("Please ensure Intercom is setup and running on client-side!")};s.Intercom=e=>{if("object"!=typeof e)return void console.warn("Intercom initialiser called with invalid parameters.");let{region:t="us",widgetUrl:s}=e,n=a(e,["region","widgetUrl"]);"undefined"==typeof window||r.ref||(window.intercomSettings=Object.assign(Object.assign({},n),{api_base:i.regionAPIs.get(t)}),(0,r.init)({widgetUrl:s}))},s.default=s.Intercom,s.boot=e=>n("boot",e),s.shutdown=()=>n("shutdown"),s.update=e=>n("update",e),s.hide=()=>n("hide"),s.show=()=>n("show"),s.showSpace=e=>n("showSpace",e),s.showMessages=()=>n("showMessages"),s.showNewMessage=e=>n("showNewMessage",e),s.onHide=e=>n("onHide",e),s.onShow=e=>n("onShow",e),s.onUnreadCountChange=e=>n("onUnreadCountChange",e),s.trackEvent=(...e)=>n("trackEvent",...e),s.getVisitorId=()=>n("getVisitorId"),s.whoami=()=>n("whoami"),s.startTour=e=>n("startTour",e),s.showArticle=e=>n("showArticle",e),s.showNews=e=>n("showNews",e),s.startSurvey=e=>n("startSurvey",e),s.startChecklist=e=>n("startChecklist",e),s.showTicket=e=>n("showTicket",e),s.showConversation=e=>n("showConversation",e),s.onUserEmailSupplied=e=>n("onUserEmailSupplied",e),s.hideNotifications=e=>n("hideNotifications",e)},215224,e=>{"use strict";var t=e.i(722921);let s=(0,e.i(738290).create)((e,s)=>({isReady:!1,isVisible:!1,hasBooted:!1,previousUserId:null,previousBusinessId:null,setIsReady:t=>e({isReady:t}),setIsVisible:t=>e({isVisible:t}),setHasBooted:t=>e({hasBooted:t}),setPreviousUserId:t=>e({previousUserId:t}),setPreviousBusinessId:t=>e({previousBusinessId:t}),openLiveChat:e=>e?(0,t.showNewMessage)(e):(0,t.show)(),closeLiveChat:()=>(0,t.shutdown)(),hideLiveChat:()=>(0,t.hide)(),reset:()=>e({isReady:!1,hasBooted:!1,previousUserId:null,previousBusinessId:null})}));e.s(["useLiveChat",0,s])},565732,e=>{"use strict";var t=e.i(16572),s=e.i(401181);e.i(636623);var a=e.i(879403),i=e.i(439080),r=e.i(825752),n=e.i(269714),o=e.i(183509),l=e.i(439579),d=e.i(109107),u=e.i(796571),c=e.i(981831),m=e.i(462356),h=e.i(397944),p=e.i(190286),f=e.i(106378);let w=({open:e,setOpen:a,title:i,description:r,imgSrc:n,mobileImgSrc:o,upgradeButtonLabel:l,onClick:w,"data-testid":g})=>{let v=(0,h.useIsMobile)(),{setOpen:b}=(0,f.usePaywall)(),y=(0,s.useMemo)(()=>v&&o?o:n,[v,o,n]),x=(0,s.useCallback)(()=>{b(!0),a(!1),w&&w()},[b,a,w]);return(0,t.jsx)(m.Credenza,{open:e,onOpenChange:a,className:"md:mx-4",children:(0,t.jsxs)(m.CredenzaContent,{className:"p-0 sm:max-w-[808px] md:min-h-[480px]","data-testid":g,children:[(0,t.jsx)(m.CredenzaHeader,{className:"sr-only",children:(0,t.jsx)(m.CredenzaTitle,{children:i})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row-reverse",children:[(0,t.jsx)("div",{className:"p-4 md:max-w-[360px] md:p-2",children:(0,t.jsx)(u.default,{className:(0,p.cn)("rounded-2xl",!o&&"max-h-80 max-md:object-cover max-md:object-top sm:max-h-80 md:max-h-full"),src:y,alt:i,width:752,height:1014})}),(0,t.jsxs)("div",{className:"flex w-full flex-1 flex-col justify-between gap-6 px-4 pb-4 pt-2 md:p-16",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 text-black/80 max-md:px-2",children:[(0,t.jsx)(d.Typography,{variant:"2xl",className:"font-semibold",children:i}),r]}),(0,t.jsx)("div",{className:"w-full md:w-auto",children:(0,t.jsx)(c.Button,{size:"lg",className:"w-full md:w-auto",onClick:x,"data-testid":"upgrade-modal-upgrade-button",children:l})})]})]})]})})};var g=e.i(860552),v=e.i(479668),b=e.i(283107),y=e.i(103991);let x=()=>{let[e,a]=(0,i.useQueryState)("upgrade-for-website",i.parseAsBoolean),r=(0,o.useTranslations)("dashboard.website.upgrade"),{canStartFreeTrial:n}=(0,b.useFreeTrial)(),{track:u}=(0,v.useAnalytics)(),c=(0,s.useCallback)(e=>{a(e||null)},[a]),m=["features.feature1","features.feature2","features.feature3","features.feature4"];return(0,t.jsx)(w,{title:r("title"),description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Typography,{variant:"sm",children:r("description")}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.CheckmarkIcon,{className:"shrink-0 text-black/55"}),(0,t.jsx)(d.Typography,{as:"span",variant:"sm",children:r(m[s])})]},m[s]))})]}),imgSrc:(0,y.getCdnAsset)("dashboard/upgrade/upgrade-modal-desktop.png"),mobileImgSrc:(0,y.getCdnAsset)("dashboard/upgrade/upgrade-modal-mob.png"),open:!!e,setOpen:c,upgradeButtonLabel:r(n?"buttonVariant":"button"),onClick:()=>{u(g.PRODUCT_EVENTS.ACCOUNT_PAYWALL_UPGRADE_CLICKED,{context:"website"})}})};var I=e.i(216246),E=e.i(124793),S=e.i(118767),j=e.i(215224),C=e.i(162341),N=e.i(139626),M=e.i(158956),P=e.i(727191);let T="/website/dashboard",_=["/website","/website/dashboard","/website/builder","/website/settings","/website/blog","/website/domain"],O=e=>{let t=new URLSearchParams(e.startsWith("?")?e.slice(1):e),s={};for(let[e,a]of t.entries())s[e]=a;return s},A=(e,t)=>{let{pathname:s,search:a}=new URL(e);if(!s.startsWith("/website"))return void M.logger.warn("The v1 app is navigating to a route that is not supported",{metadata:{v1Pathname:s}});let i=t.slice(0,t.indexOf("/website")),r=s;return"/website/dashboard"===r&&(r="/website"),{pathname:`${i}${r}`,...a?{queryParams:O(a)}:{},fullPath:`${i}${r}${a?`${a}`:""}`}},R=()=>{let e=(0,s.useRef)(null),o=(0,s.useRef)(!1),l=(0,s.useRef)(null),[d,u]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),{replace:w,push:g}=(0,S.useRouter)(),v=(0,S.usePathname)(),b=(0,a.useSearchParams)(),{open:y,isMobile:R,setOpen:U,setOpenMobile:B}=(0,n.useSidebar)(),{activeBusiness:K,refetchBusinesses:L}=(0,I.useBusinessContext)(),[,k]=(0,i.useQueryState)("upgrade-for-website",i.parseAsBoolean),{setOpen:$}=(0,f.usePaywall)(),{openLiveChat:V}=(0,j.useLiveChat)(),{isSessionReady:W}=(0,C.useV1AuthIframeStore)(),D=(0,s.useRef)(v.endsWith("builder")&&y);(0,s.useEffect)(()=>{if(!v.startsWith(`${(0,N.getBusinessUrl)(K?.slug)}/website`))throw Error("Only the v1 website should be embedded.")},[v,K?.slug]);let H=(0,s.useCallback)(t=>{if(e.current)return e.current.src=t,l.current&&window.clearTimeout(l.current),l.current=window.setTimeout(()=>{o.current||M.logger.error("V1 iframe failed to load after 10000ms timeout.",{metadata:{url:t}})},1e4),()=>{l.current&&window.clearTimeout(l.current)}},[]);(0,s.useEffect)(()=>{v.includes("/website/builder")&&U(!1)},[]),(0,s.useEffect)(()=>{if(!d&&e.current&&W){let e;u(!0);let t=b.toString()?`?${b.toString()}`:"";H(`https://inapp.durable.co${(e=v.indexOf("/website"),!_.some(e=>v.endsWith(e))||v.endsWith("/website")||v.endsWith("/website/")?{pathname:T,fullPath:T}:{pathname:`${v.slice(e)}`,...t?{queryParams:O(t)}:{},fullPath:`${v.slice(e)}${t?`${t}`:""}`})?.fullPath}`)}},[d,H,v,b,W]),(0,s.useEffect)(()=>{let e=()=>{window.location.pathname.includes("website")||R||!D.current||U(!0)};return window.addEventListener("popstate",e),()=>{setTimeout(()=>{window.removeEventListener("popstate",e)})}},[]),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.SHOW_PAYWALL,onMessage:({type:e})=>{e?"pricing"===e&&$(!0):k(!0)}});let{sendMessage:z}=(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.SIDEBAR_COLLAPSE_TOGGLE,iframeRef:e,onMessage:({collapse:e})=>{R?B(!e):U(!e)}});return(0,s.useEffect)(()=>{h&&z({collapse:!y||R})},[y,R,z,h]),(0,E.useIframeMessage)({iframeRef:e,eventKey:P.IframeEventKeys.ROUTE_CHANGE,onMessage:({url:e})=>{let t=A(e,v),s=v+(b.toString()?`?${b.toString()}`:"");t&&t.fullPath!==s&&w({pathname:t.pathname,query:t.queryParams})}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.ERROR,iframeRef:e,onMessage:({error:e})=>{let t="https://inapp.durable.co/website/dashboard";w({pathname:A(t,v).pathname}),H(t),M.logger.error("V1 iframe error, reloading iframe.",{cause:e})}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.PAGE_RENDERED,iframeRef:e,onMessage:()=>{o.current=!0,m(!0)}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.HEADER_READY,iframeRef:e,onMessage:()=>{p(!0)}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.REGENERATED_BUSINESS,iframeRef:e,onMessage:async()=>{L()}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.BUILDER_EXIT,iframeRef:e,onMessage:()=>{R||setTimeout(()=>{U(!0)},400),g((0,N.getBusinessUrl)(K.slug))}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.SHOW_LIVE_CHAT,iframeRef:e,onMessage:()=>{V()}}),(0,E.useIframeMessage)({eventKey:P.IframeEventKeys.GET_BUSINESS,iframeRef:e,onMessage(e,t){t({businessId:K.mongoBusinessId,businessName:K.name})}}),(0,t.jsxs)("div",{className:"mx-auto h-dvh w-full md:h-screen",children:[(!c||!W)&&(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)(r.LoaderIcon,{className:"size-5 animate-spin text-brand"})}),(0,t.jsx)("iframe",{ref:e,allow:"clipboard-write","data-testid":"v1-website",title:"v1-website",src:void 0,width:"100%",height:"100%"}),(0,t.jsx)(x,{})]})};function U(){return(0,t.jsx)("div",{className:"mx-auto h-dvh w-full md:h-screen",children:(0,t.jsx)(s.Suspense,{children:(0,t.jsx)(R,{})})})}e.s(["default",()=>U],565732)}]);

//# sourceMappingURL=f529bfc8dab5c177.js.map
//# chunkId=019a9487-e2b4-7883-b96f-74e101dbed1d