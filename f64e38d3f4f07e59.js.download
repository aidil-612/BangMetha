!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._posthogChunkIds=e._posthogChunkIds||{},e._posthogChunkIds[n]="019a9487-df41-7b03-a942-84d07153f626")}catch(e){}}();(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,991565,446052,e=>{"use strict";var s=e.i(16572),a=e.i(401181);e.s(["SignOutIcon",0,e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"24",height:"24",...e,children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 3.75a.75.75 0 0 1 .75-.75h3.5A2.75 2.75 0 0 1 17 5.75v8.5A2.75 2.75 0 0 1 14.25 17h-3.5a.75.75 0 0 1 0-1.5h3.5c.69 0 1.25-.56 1.25-1.25v-8.5c0-.69-.56-1.25-1.25-1.25h-3.5a.75.75 0 0 1-.75-.75M7.78 5.97a.75.75 0 0 1 0 1.06L5.56 9.25h5.69a.75.75 0 0 1 0 1.5H5.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0",clipRule:"evenodd"})})],991565);var i=e.i(715202),l=e.i(910917),t=e.i(727191),n=e.i(162341),r=e.i(158956),o=e.i(479668),d=e.i(124793);e.s(["useSignOut",0,e=>{let s=(0,a.useRef)(!1),{track:c}=(0,o.useAnalytics)(),{signOut:u}=(0,i.useClerk)(),m=(0,l.useQueryClient)(),{setRoute:x}=(0,n.useV1AuthIframeStore)(),h=(0,a.useCallback)(async()=>{await u({redirectUrl:"/"}),m.removeQueries()},[m,u]),p=(0,a.useCallback)(async()=>{e&&c(e),x("logout"),window.setTimeout(async()=>{s.current||(s.current=!0,r.logger.warn("Forced sign out after waiting for v1 auth iframe for 2000ms"),await h())},2e3)},[x,h,c,e]);return(0,d.useIframeMessage)({eventKey:t.IframeEventKeys.LOGOUT,onMessage:async()=>{s.current||(s.current=!0,await h())}}),{signOut:p}}],446052)},908451,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(183509);let l=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"24",height:"24",...e,children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.894 3.549a.25.25 0 0 0-.394.204v3.566h.75c.966 0 1.75.784 1.75 1.75v8.25h1.75a.25.25 0 0 0 .25-.25V6.586a.25.25 0 0 0-.104-.203zM10 3.753v3.566H7.75A1.75 1.75 0 0 0 6 9.07v.75H4.75A1.75 1.75 0 0 0 3 11.57v5.5c0 .966.784 1.75 1.75 1.75h11a1.75 1.75 0 0 0 1.75-1.75V6.586c0-.566-.274-1.1-.74-1.429l-3.999-2.832C11.604 1.505 10 2.332 10 3.753M7.5 9.069a.25.25 0 0 1 .25-.25h4.5a.25.25 0 0 1 .25.25v8.25h-5V9.07M6 17.32H4.75a.25.25 0 0 1-.25-.25v-5.5a.25.25 0 0 1 .25-.25H6zm3.25-7.5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5zm-.75 3.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75m.75 1.75a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"})});var t=e.i(359555),n=e.i(197809),r=e.i(381886),o=e.i(560725),d=e.i(462356),c=e.i(397944),u=e.i(820713),m=e.i(469594),x=e.i(410747),h=e.i(910917),p=e.i(439080),g=e.i(981831),b=e.i(922036),j=e.i(672362),f=e.i(821454);let v=({onCancel:e,onSave:l,isDirty:t,isSaving:n,toastOnSuccess:r})=>{let o=(0,i.useTranslations)("common"),{formState:d}=(0,u.useFormContext)()||{},{isDirty:c}=d||{},m=(0,a.useCallback)(()=>{!n&&(l?.(),r&&b.toast.success(o("saved")))},[n,l,r,o]);return t??c?(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-10 mt-auto flex gap-2 border-t bg-white p-5",children:[(0,s.jsx)(g.Button,{onClick:e,disabled:n,variant:"secondary",size:"lg",className:"flex-1",type:"button",children:(0,s.jsx)("span",{children:o("cancel")})}),(0,s.jsx)(g.Button,{size:"lg",className:"flex-1",type:l?"button":"submit",onClick:m,disabled:n,children:(0,s.jsx)("span",{children:n?o("saving"):o("save")})})]}):null};e.i(474645);var C=e.i(347169),y=e.i(294237),N=e.i(94623),T=e.i(787108),S=e.i(998961),I=e.i(190286);let E=(0,y.cva)("relative flex w-full gap-3 rounded-xl py-4",{variants:{variant:{default:"bg-black/3 text-black/55",destructive:"bg-red-50 text-red-700",info:"bg-black/5 text-black/55",warning:"bg-yellow-50 text-yellow-700"},icon:{true:"px-4",false:"px-6"}},defaultVariants:{variant:"default",icon:!0}}),A=({variant:e})=>{switch(e){case"warning":return(0,s.jsx)(N.BellIcon,{});case"destructive":return(0,s.jsx)(S.WarningTriangleIcon,{});case"info":return(0,s.jsx)(T.InfoCircleIcon,{});default:return null}},w=a.forwardRef(({className:e,variant:a,icon:i=!0,...l},t)=>(0,s.jsxs)("div",{ref:t,role:"alert",className:(0,I.cn)(E({variant:a,icon:i}),e),...l,children:[i&&(0,s.jsx)(A,{variant:a}),(0,s.jsx)("div",{className:"flex w-full flex-col justify-between gap-4 lg:flex-row lg:items-center",children:l.children})]}));w.displayName="Alert";let k=a.forwardRef(({className:e,...a},i)=>(0,s.jsx)("div",{ref:i,className:(0,I.cn)("flex flex-col gap-1",e),...a}));k.displayName="AlertContent";let P=a.forwardRef(({className:e,...a},i)=>(0,s.jsx)("div",{ref:i,className:(0,I.cn)("flex items-center gap-2",e),...a}));P.displayName="AlertActions";var M=e.i(992763),B=e.i(109107),_=e.i(216246),D=e.i(771158);let L=({open:e,onOpenChange:l})=>{let t=(0,i.useTranslations)("settings.deleteBusiness"),n=(0,i.useTranslations)("common"),r=(0,D.useTRPC)(),{activeBusiness:o,isManager:c}=(0,_.useBusinessContext)(),h=(0,a.useMemo)(()=>C.object({businessName:C.string().min(1,t("businessNameRequired")).refine(e=>e===o.name,{message:t("businessNameMismatch")}),confirmationPhrase:C.string().min(1,t("phraseRequired")).superRefine((e,s)=>{"Delete my data and business"!==e&&s.addIssue({code:C.ZodIssueCode.custom,message:t("phraseMismatch")})})}),[t,o]),p=(0,a.useMemo)(()=>({businessName:"",confirmationPhrase:""}),[]),j=(0,u.useForm)({defaultValues:p,mode:"onSubmit",resolver:(0,m.zodResolver)(h)}),v=(0,x.useMutation)(r.business.deleteBusiness.mutationOptions({onSuccess:async()=>{b.toast.success(n("deleted")),window.location.replace("/b")},onError:e=>{b.toast.error(n("failed"))}})),y=(0,a.useCallback)(()=>{v.mutate({businessId:o.id})},[v,o.id]);return((0,a.useEffect)(()=>{j.reset(p)},[j,p,e]),c)?(0,s.jsx)(d.Credenza,{open:e,onOpenChange:l,children:(0,s.jsx)(d.CredenzaContent,{className:"p-0",children:(0,s.jsx)(M.ScrollArea,{className:"flex flex-1 flex-col",children:(0,s.jsxs)("div",{className:"flex flex-col gap-5 px-4 py-7 md:p-16",children:[(0,s.jsxs)(d.CredenzaHeader,{className:"m-0 gap-4 overflow-hidden p-0",children:[(0,s.jsx)(d.CredenzaTitle,{className:"overflow-hidden text-ellipsis",children:t("title")}),(0,s.jsx)(d.CredenzaDescription,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"text-black/55",children:t("description")})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-5",children:[(0,s.jsx)(w,{variant:"destructive",children:(0,s.jsx)(k,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium",children:t("cantBeUndone")})})}),(0,s.jsx)(B.Typography,{children:t.rich("businessNameConfirmation",{strong:e=>(0,s.jsx)("span",{className:"font-medium",children:e}),businessName:o.name})}),(0,s.jsx)(u.FormProvider,{...j,children:(0,s.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:j.handleSubmit(y),children:[(0,s.jsx)(f.TextFormField,{label:t("businessNameConfirmationLabel"),fieldName:"businessName",placeholder:t("businessNameConfirmationPlaceholder"),disabled:v.isPending}),(0,s.jsx)(B.Typography,{children:t.rich("confirmationPhrase",{strong:e=>(0,s.jsx)("span",{className:"font-medium",children:e}),phrase:"Delete my data and business"})}),(0,s.jsx)(f.TextFormField,{label:t("confirmationPhraseLabel"),fieldName:"confirmationPhrase",placeholder:t("confirmationPhrasePlaceholder"),disabled:v.isPending}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Button,{type:"button",onClick:l,size:"lg",className:"flex-1",children:n("cancel")}),(0,s.jsx)(g.Button,{size:"lg",variant:"destructive",className:"flex-1",children:t("confirm")})]})]})})]})]})})})}):null};var R=e.i(860552),O=e.i(479668),F=e.i(17783),U=e.i(939940);function z(e){return e.name}let V=(e,s,a=z)=>a(e)<a(s)?-1:+(a(e)>a(s)),G=["name","countryCode","stateCode","latitude","longitude"],K=[];var q=e.i(309599),Q=e.i(915268);let H=function(e=""){return e?Q.default.filter(s=>s.countryCode===e).sort(V):[]},W=({business:e})=>{let l=(0,i.useTranslations)("settings.businessDetails"),t=(0,i.useTranslations)("common"),n=(0,i.useTranslations)("settings.deleteBusiness"),r=(0,D.useTRPC)(),o=(0,h.useQueryClient)(),{track:d}=(0,O.useAnalytics)(),{isManager:c}=(0,_.useBusinessContext)(),[C,y]=(0,p.useQueryState)("delete-business",p.parseAsBoolean),N=(0,a.useMemo)(()=>q.default.map(e=>({name:e.name,id:e.isoCode})),[]),T=(0,a.useMemo)(()=>({name:e.name??"",email:e.email??"",description:e.description??"",addressLine1:e.addressLine1??"",addressLine2:e.addressLine2??"",city:e.city??"",state:e.state??"",countryCode:e.countryCode?.toUpperCase()??"",postalCode:e.postalCode??"",phoneNumber:e.phoneNumber??""}),[e]),S=(0,u.useForm)({defaultValues:T,mode:"onSubmit",resolver:(0,m.zodResolver)(F.businessDetailsSchema)}),I=(0,u.useWatch)({control:S.control,name:"countryCode"}),E=(0,u.useWatch)({control:S.control,name:"state"}),A=(0,u.useWatch)({control:S.control,name:"city"}),w=(0,x.useMutation)(r.business.update.mutationOptions({onSuccess:async()=>{b.toast.success(t("saved")),await o.invalidateQueries({queryKey:r.business.list.queryKey()}),await o.invalidateQueries({queryKey:r.business.hasDescription.queryKey()}),d(R.PRODUCT_EVENTS.SETTINGS_BUSINESS_DETAILS_CHANGES_SAVED)},onError:e=>{b.toast.error(t("saveError"))}})),k=(0,a.useCallback)(s=>{w.mutate({businessId:e.id,...s})},[e,w]),P=(0,a.useCallback)(()=>{S.reset(T)},[S,T]),M=(0,a.useMemo)(()=>{if(!I)return[];let e=(({countryCode:e})=>H(e))({countryCode:I}).map(e=>({name:e.name,id:e.isoCode}));return E&&!e.some(e=>e.id===E)&&e.push({name:E,id:E}),e},[E,I]),z=(0,a.useMemo)(()=>!!I&&(({countryCode:e})=>H(e))({countryCode:I}).length>0,[I]),Q=(0,a.useMemo)(()=>{if(!I||!z||!E)return[];let e=((({countryCode:e,stateCode:s})=>{var a,i;return a=e,(i=s)&&a?(function(e=G){var s;if(K.length)return K;let a=U.default;return s=null!=e?e:G,K=a.map(e=>Object.fromEntries(s.map((s,a)=>[s,e[a]])))})().filter(e=>e.countryCode===a&&e.stateCode===i).sort(V):[]})({countryCode:I,stateCode:E})||[]).map(e=>({name:e.name,id:e.name}));return A&&!e.some(e=>e.id===A)&&e.push({name:A,id:A}),e},[A,I,E,z]),W=(0,a.useCallback)(()=>{S.setValue("state",""),S.setValue("city","")},[S]),$=(0,a.useCallback)(()=>{S.setValue("city","")},[S]);return(0,a.useEffect)(()=>{S.reset(T)},[T,S]),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.FormProvider,{...S,children:(0,s.jsxs)("form",{onSubmit:S.handleSubmit(k),children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-10",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(f.TextFormField,{fieldName:"name",label:l("businessName.label"),placeholder:l("businessName.placeholder")}),(0,s.jsx)(f.TextFormField,{fieldName:"description",label:l("businessDescription.label"),placeholder:l("businessDescription.placeholder"),type:"textarea"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 border-t border-t-gray-200 pt-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(B.Typography,{variant:"sm",className:"font-semibold",children:l("businessContact.title")}),(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:l("businessContact.subtitle")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-x-4 gap-y-6 md:grid-cols-2",children:[(0,s.jsx)(f.TextFormField,{fieldName:"email",type:"email",label:l("businessContact.email.label"),placeholder:l("businessContact.email.placeholder")}),(0,s.jsx)(f.TextFormField,{fieldName:"phoneNumber",inputMode:"tel",label:l("businessContact.phoneNumber.label"),placeholder:l("businessContact.phoneNumber.placeholder")})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 border-t border-t-gray-200 pt-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(B.Typography,{variant:"sm",className:"font-semibold",children:l("businessAddress.title")}),(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:l("businessAddress.subtitle")})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(f.TextFormField,{fieldName:"addressLine1",label:l("businessAddress.addressLine1.label"),placeholder:l("businessAddress.addressLine1.placeholder")}),(0,s.jsx)(f.TextFormField,{fieldName:"addressLine2",placeholder:l("businessAddress.addressLine2.placeholder")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-x-4 gap-y-6 md:grid-cols-2",children:[(0,s.jsx)(j.SelectFormField,{fieldName:"countryCode",label:l("businessAddress.country.label"),placeholder:l("businessAddress.country.placeholder"),values:N,onChange:W,dataTestId:"business-country-select"}),(0,s.jsx)(j.SelectFormField,{fieldName:"state",label:l("CA"===I?"businessAddress.province.label":"businessAddress.state.label"),placeholder:l("CA"===I?"businessAddress.province.placeholder":"businessAddress.state.placeholder"),values:M,onChange:$,disabled:!z,dataTestId:"business-state-select"}),(0,s.jsx)(j.SelectFormField,{fieldName:"city",label:l("businessAddress.city.label"),placeholder:l("businessAddress.city.placeholder"),values:Q,disabled:!Q.length,dataTestId:"business-city-select"}),(0,s.jsx)(f.TextFormField,{fieldName:"postalCode",label:l("businessAddress.postalCode.label"),placeholder:l("businessAddress.postalCode.placeholder")})]})]}),c&&(0,s.jsxs)("div",{className:"flex flex-col items-start gap-6 border-t border-black/10 pt-10",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(B.Typography,{variant:"sm",className:"font-semibold",children:n("title")}),(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:n("description")})]}),(0,s.jsx)(g.Button,{type:"button",variant:"destructive",onClick:()=>y(!0),children:n("confirm")})]})]}),(0,s.jsx)(v,{onCancel:P,isSaving:w.isPending})]})}),c&&(0,s.jsx)(L,{open:!!C,onOpenChange:()=>y(null)})]})},$=()=>{let e=(0,i.useTranslations)("settings.businessDetails"),{activeBusiness:a}=(0,_.useBusinessContext)();return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(B.Typography,{variant:"2xl",className:"font-semibold",children:e("title")}),(0,s.jsx)(W,{business:a})]})};var Y=e.i(854833),Z=e.i(958083),J=e.i(998855),X=e.i(183144),ee=e.i(670102),es=e.i(479735),ea=e.i(340904);let ei=(0,es.codes)(),el=({value:e,onChange:a,dataTestId:i})=>(0,s.jsxs)(ea.Select,{value:e,onValueChange:e=>{e&&a(e)},children:[(0,s.jsx)(ea.SelectTrigger,{size:"lg","data-testid":i,children:(0,s.jsx)(ea.SelectValue,{placeholder:"placeholder"})}),(0,s.jsx)(ea.SelectContent,{children:(0,s.jsx)(ea.SelectGroup,{children:ei.map(e=>(0,s.jsx)(ea.SelectItem,{value:e,children:e},e))})})]});var et=e.i(290583);let en=et.z.object({id:et.z.number(),taxRate:et.z.number().min(0).max(1),currency:et.z.string()});et.z.object({taxRate:et.z.number().min(0).max(1).optional().default(0),currency:et.z.string().optional(),businessId:et.z.number()});let er=({invoiceSettings:e})=>{let l=(0,i.useTranslations)("dashboard.invoice.settings"),t=(0,D.useTRPC)(),{activeBusiness:n}=(0,_.useBusinessContext)(),r=(0,h.useQueryClient)(),{track:o}=(0,O.useAnalytics)(),d=(0,u.useForm)({defaultValues:e,mode:"onSubmit",resolver:(0,m.zodResolver)(en)}),{control:c,handleSubmit:p,reset:g,formState:j}=d,{isDirty:f}=j,C=(0,x.useMutation)(t.businessInvoicingSettings.update.mutationOptions({onSuccess:async()=>{b.toast.success(l("success")),await r.invalidateQueries({queryKey:t.businessInvoicingSettings.getByBusinessId.queryKey({businessId:n.id})}),o(R.PRODUCT_EVENTS.SETTINGS_INVOICING_CHANGES_SAVED)},onError:e=>{b.toast.error(e.message)}})),y=(0,a.useCallback)(e=>{n&&e.id&&C.mutate({businessId:n.id,...e})},[n,C]);return(0,a.useEffect)(()=>{e&&g(e)},[e,g]),(0,s.jsx)(u.FormProvider,{...d,children:(0,s.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:p(y),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(B.Typography,{variant:"sm",className:"font-semibold",children:l("subheading")}),(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:l("caption")})]}),e?(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)(J.FormField,{control:c,name:"currency",render:({field:e})=>(0,s.jsxs)(J.FormItem,{children:[(0,s.jsx)(J.FormLabel,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:l("defaultCurrency")})}),(0,s.jsx)(J.FormControl,{children:(0,s.jsx)(el,{value:e.value,onChange:s=>{e.onChange(s)},dataTestId:"invoice-currency-select"})})]})})}),(0,s.jsx)("div",{children:(0,s.jsx)(J.FormField,{control:c,name:"taxRate",render:({field:e,fieldState:a})=>(0,s.jsxs)(J.FormItem,{children:[(0,s.jsx)(J.FormLabel,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:l("defaultTax")})}),(0,s.jsx)(J.FormControl,{children:(0,s.jsx)(X.Input,{...e,size:"lg",value:"number"==typeof e.value?new Z.default(e.value).mul(100).toNumber():void 0,formatType:"numeric",formatProps:{allowNegative:!1,allowLeadingZeros:!1,placeholder:"0%",suffix:"%",onValueChange:s=>{let a=new Z.default(s.value||0);e.onChange(a.div(100).toNumber())}},className:(0,I.cn)("w-full",a.error&&"ring-red-200!"),onChange:()=>{},"data-testid":"invoice-tax-rate-input"})}),(0,s.jsx)(J.FormMessage,{})]})})})]}):(0,s.jsx)(ee.Skeleton,{className:"h-32 w-full"}),(0,s.jsx)(v,{onCancel:()=>g(e),isDirty:f,isSaving:C.isPending})]})})};var eo=e.i(218683);let ed=()=>{let e=(0,i.useTranslations)("dashboard.invoice.settings"),a=(0,D.useTRPC)(),{activeBusiness:l}=(0,_.useBusinessContext)(),[t]=(0,eo.useSettings)(),{data:n}=(0,Y.useQuery)(a.businessInvoicingSettings.getByBusinessId.queryOptions({businessId:l.id},{enabled:"invoicing"===t}));return(0,s.jsxs)("div",{className:"flex flex-col gap-10",children:[(0,s.jsx)(B.Typography,{variant:"2xl",className:"font-semibold",children:e("title")}),(0,s.jsx)(er,{invoiceSettings:n})]})};var ec=e.i(269714),eu=e.i(991565),em=e.i(446052);let ex=({settings:e})=>{let[l,t]=(0,eo.useSettings)(),{track:n}=(0,O.useAnalytics)(),r=(0,i.useTranslations)("account"),{signOut:o}=(0,em.useSignOut)(R.PRODUCT_EVENTS.SETTINGS_LOGOUT),d=(0,a.useCallback)(e=>{t(e.name),n(R.PRODUCT_EVENTS.SETTINGS_NAV_ITEM_CLICKED,{item_name:e.name})},[t,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.SidebarContent,{children:(0,s.jsx)(ec.SidebarGroup,{children:(0,s.jsx)(ec.SidebarMenu,{children:e.map(e=>(0,s.jsx)(ec.SidebarMenuItem,{children:(0,s.jsxs)(ec.SidebarMenuButton,{tooltip:e.title,isActive:l===e.name,onClick:()=>d(e),children:[e.icon&&(0,s.jsx)(e.icon,{}),(0,s.jsx)("span",{children:e.title})]})},`settings-${e.name}`))})})}),(0,s.jsx)(ec.SidebarFooter,{className:"mt-auto",children:(0,s.jsx)(ec.SidebarGroup,{children:(0,s.jsx)(ec.SidebarMenu,{children:(0,s.jsx)(ec.SidebarMenuItem,{children:(0,s.jsxs)(ec.SidebarMenuButton,{tooltip:r("logout"),onClick:o,children:[(0,s.jsx)(eu.SignOutIcon,{}),(0,s.jsx)("span",{children:r("logout")})]})})})})})]})},eh=({settings:e})=>{let[i]=(0,eo.useSettings)(),{activeBusiness:l}=(0,_.useBusinessContext)(),t=(0,a.useMemo)(()=>e.find(e=>e.name===i),[i,e]),n=(0,a.useMemo)(()=>{if(!t)return null;let{Component:e}=t;return(0,s.jsx)(e,{})},[t]);return(0,s.jsxs)("div",{className:"flex max-h-full overflow-hidden",children:[(0,s.jsxs)("aside",{className:"flex h-full w-[220px] max-w-full flex-col border-r border-black/5",children:[(0,s.jsx)(ec.SidebarHeader,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"max-w-48 truncate px-3 py-1 font-medium",children:l.name||""})}),(0,s.jsx)(ex,{settings:e})]}),(0,s.jsx)(M.ScrollArea,{className:"flex flex-1 flex-col bg-white",children:(0,s.jsx)("div",{className:"flex flex-1 flex-col p-14 pb-[120px] pt-[60px]",children:n})})]})},ep=({settings:e})=>{let[l]=(0,eo.useSettings)(),t=(0,i.useTranslations)("settings"),n=(0,a.useMemo)(()=>e.find(e=>e.name===l),[l,e]),r=(0,a.useMemo)(()=>{if(!n)return null;let{Component:e}=n;return(0,s.jsx)(e,{})},[n]);return(0,s.jsx)("div",{className:"flex h-full max-h-[calc(100%-20px)] flex-col pt-7",children:r?(0,s.jsx)(M.ScrollArea,{className:"flex flex-1 flex-col bg-white",children:(0,s.jsx)("div",{className:"flex flex-1 flex-col p-4 pb-[120px]",children:r})}):(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[(0,s.jsx)(B.Typography,{variant:"2xl",className:"px-6 pb-2 pt-4 font-semibold",children:t("title")}),(0,s.jsx)(ex,{settings:e})]})})};var eg=e.i(715202);e.i(636623);var eb=e.i(439579),ej=e.i(432245),ef=e.i(181241);let ev=({open:e,onOpenChange:l})=>{let t=(0,i.useTranslations)("settings.deleteAccount"),n=(0,i.useTranslations)("common"),r=(0,D.useTRPC)(),{signOut:o}=(0,em.useSignOut)(),{user:c}=(0,eg.useUser)(),h=(0,a.useMemo)(()=>C.object({email:C.string().min(1,t("emailRequired")).email(t("invalidEmail")).refine(e=>e===c?.primaryEmailAddress?.emailAddress,{message:t("emailMismatch")}),confirmationPhrase:C.string().min(1,t("phraseRequired")).superRefine((e,s)=>{"Delete my data and account"!==e&&s.addIssue({code:C.ZodIssueCode.custom,message:t("phraseMismatch")})})}),[t,c]),p=(0,a.useMemo)(()=>({email:"",confirmationPhrase:""}),[]),j=(0,u.useForm)({defaultValues:p,mode:"onSubmit",resolver:(0,m.zodResolver)(h)}),v=(0,x.useMutation)(r.user.deleteAccount.mutationOptions({onSuccess:async()=>{b.toast.success(n("deleted")),await o()},onError:e=>{b.toast.error(n("failed"))}})),y=(0,a.useCallback)(()=>{v.mutate()},[v]);return(0,a.useEffect)(()=>{j.reset(p)},[j,p,e]),(0,s.jsx)(d.Credenza,{open:e,onOpenChange:l,children:(0,s.jsx)(d.CredenzaContent,{className:"p-0",children:(0,s.jsx)(M.ScrollArea,{className:"flex flex-1 flex-col",children:(0,s.jsxs)("div",{className:"flex flex-col gap-5 px-4 py-7 md:p-16",children:[(0,s.jsxs)(d.CredenzaHeader,{className:"m-0 gap-4 overflow-hidden p-0",children:[(0,s.jsx)(d.CredenzaTitle,{className:"overflow-hidden text-ellipsis",children:t("title")}),(0,s.jsx)(d.CredenzaDescription,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"text-black/55",children:t("description")})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-5",children:[(0,s.jsx)(w,{variant:"destructive",children:(0,s.jsx)(k,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium",children:t("cantBeUndone")})})}),(0,s.jsx)(B.Typography,{children:t.rich("emailConfirmation",{strong:e=>(0,s.jsx)("span",{className:"font-medium",children:e}),email:c?.primaryEmailAddress?.emailAddress||c?.emailAddresses[0]?.emailAddress||""})}),(0,s.jsx)(u.FormProvider,{...j,children:(0,s.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:j.handleSubmit(y),children:[(0,s.jsx)(f.TextFormField,{label:t("emailConfirmationLabel"),fieldName:"email",type:"email",placeholder:t("emailConfirmationPlaceholder"),disabled:v.isPending}),(0,s.jsx)(B.Typography,{children:t.rich("confirmationPhrase",{strong:e=>(0,s.jsx)("span",{className:"font-medium",children:e}),phrase:"Delete my data and account"})}),(0,s.jsx)(f.TextFormField,{label:t("confirmationPhraseLabel"),fieldName:"confirmationPhrase",placeholder:t("confirmationPhrasePlaceholder"),disabled:v.isPending}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Button,{type:"button",onClick:l,size:"lg",className:"flex-1",children:n("cancel")}),(0,s.jsx)(g.Button,{size:"lg",variant:"destructive",className:"flex-1",children:t("confirm")})]})]})})]})]})})})})},eC=et.z.object({firstName:et.z.string().optional(),lastName:et.z.string().optional(),email:et.z.string(),externalAccountIds:et.z.array(et.z.string()).optional()});var ey=e.i(985837);let eN=({user:e})=>{let l=(0,i.useTranslations)("settings.profile"),t=(0,i.useTranslations)("settings.deleteAccount"),n=(0,i.useTranslations)("common"),r=(0,i.useTranslations)("account.signup.errors"),o=(0,D.useTRPC)(),{track:d}=(0,O.useAnalytics)(),[c,h]=(0,p.useQueryState)("delete-account",p.parseAsBoolean),j=(0,a.useMemo)(()=>({email:e.primaryEmailAddress?.emailAddress??e.emailAddresses[0].emailAddress,firstName:e.firstName||"",lastName:e.lastName||"",externalAccountIds:e.externalAccounts?.filter(s=>s.emailAddress===(e.primaryEmailAddress?.emailAddress??e.emailAddresses[0].emailAddress)).map(e=>e.id)||[]}),[e.primaryEmailAddress?.emailAddress,e.emailAddresses,e.firstName,e.lastName,e.externalAccounts]),C=(0,u.useForm)({defaultValues:j,mode:"onSubmit",resolver:(0,m.zodResolver)(eC)}),y=(0,x.useMutation)(o.user.updateProfile.mutationOptions({onSuccess:async()=>{b.toast.success(n("saved")),await e.reload(),d(R.PRODUCT_EVENTS.SETTINGS_PROFILE_CHANGES_SAVED)},onError:e=>{e.message.includes("Email already in use")?b.toast.error(r("emailAlreadyInUse")):b.toast.error(n("saveError"))}})),N=(0,a.useCallback)(e=>{y.mutate({email:e.email,firstName:e.firstName,lastName:e.lastName,externalAccountIds:e.externalAccountIds})},[y]),T=(0,a.useCallback)(()=>{C.reset(j)},[C,j]);return(0,a.useEffect)(()=>{C.reset(j)},[C,j]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.FormProvider,{...C,children:(0,s.jsxs)("form",{className:"flex flex-col",onSubmit:C.handleSubmit(N),children:[e&&(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-10",children:[(0,s.jsx)(ej.Avatar,{className:"mx-auto",size:"xl",children:(0,s.jsx)(ej.AvatarFallback,{children:(0,ey.getInitials)({name:j.firstName||j.email,length:1})})}),(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-x-4 gap-y-6 md:grid-cols-2",children:[(0,s.jsx)(f.TextFormField,{fieldName:"firstName",label:l("firstName"),placeholder:l("firstNamePlaceholder"),disabled:!1}),(0,s.jsx)(f.TextFormField,{fieldName:"lastName",label:l("lastName"),placeholder:l("lastNamePlaceholder"),disabled:!1})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.TextFormField,{fieldName:"email",type:"email",label:l("emailAddress"),disabled:!1}),e.hasVerifiedEmailAddress&&(0,s.jsxs)(ef.Tooltip,{children:[(0,s.jsx)(ef.TooltipTrigger,{className:"absolute bottom-2.5 right-4 md:bottom-2",children:(0,s.jsx)(eb.CheckmarkIcon,{className:"size-5 text-green-700"})}),(0,s.jsx)(ef.TooltipContent,{children:l("emailVerified")})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-6 border-t border-black/10 pt-10",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(B.Typography,{variant:"sm",className:"font-semibold",children:t("title")}),(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:t("description")})]}),(0,s.jsx)(g.Button,{type:"button",variant:"destructive",disabled:!1,onClick:()=>h(!0),children:t("confirm")})]})]}),(0,s.jsx)(v,{onCancel:T,isSaving:y.isPending})]})}),(0,s.jsx)(ev,{open:!!c,onOpenChange:()=>h(null)})]})},eT=()=>{let e=(0,i.useTranslations)("settings.profile"),{user:a}=(0,eg.useUser)();return a?(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(B.Typography,{variant:"2xl",className:"font-semibold",children:e("title")}),(0,s.jsx)(eN,{user:a})]}):null};e.i(156046);var eS=e.i(408386);let eI=({open:e,onOpenChange:a,onConfirm:l})=>{let t=(0,i.useTranslations)("settings.subscription.cancelSharedPlanConfirmation");return(0,s.jsx)(d.Credenza,{open:e,onOpenChange:a,children:(0,s.jsx)(d.CredenzaContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-8 py-7 md:py-0",children:[(0,s.jsxs)(d.CredenzaHeader,{className:"gap-4 overflow-hidden px-0",children:[(0,s.jsx)(d.CredenzaTitle,{className:"overflow-hidden text-ellipsis",children:t("title")}),(0,s.jsx)(d.CredenzaDescription,{children:(0,s.jsx)(B.Typography,{className:"text-black/55",children:t.rich("description",{strong:e=>(0,s.jsx)("strong",{className:"font-medium",children:e})})})})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(g.Button,{className:"flex-1",onClick:a,size:"lg",variant:"secondary",children:t("cancel")}),(0,s.jsx)(g.Button,{className:"flex-1",onClick:l,size:"lg",children:t("confirm")})]})]})})})};var eE=e.i(463377),eA=e.i(943277),ew=e.i(106378),ek=e.i(118767);e.i(577687);var eP=e.i(844653),eM=e.i(792543);let eB=({subscriptionDetails:e,viewOnly:l})=>{let t=(0,i.useTranslations)("settings.subscription"),n=(0,i.useTranslations)("common"),{setOpen:r}=(0,ew.usePaywall)(),o=(0,D.useTRPC)(),[d,c]=(0,a.useState)(null),u=(0,ek.useRouter)(),{activeBusiness:m,currentSubscription:x}=(0,_.useBusinessContext)(),{track:p}=(0,O.useAnalytics)(),{track:b}=(0,eA.useGTM)(),[,j]=(0,eo.useSettings)(),[,f]=(0,eE.useSupport)(),v=(0,h.useQueryClient)(),C=x?.stripe.plan.level===eP.StripePlanLevel.LEGACY_MOGUL_AND_PRO,y=!C,{data:N,isLoading:T}=(0,Y.useQuery)(o.billing.createPortalSessionUrl.queryOptions({businessId:m.id,returnUrl:(0,eM.getCurrentUrl)()})),{data:S,isLoading:I}=(0,Y.useQuery)(o.billing.createPortalSessionUrl.queryOptions({businessId:m.id,returnUrl:(0,eM.getCurrentUrl)(),flowType:"cancel"},{enabled:!!x&&!y})),{data:E,isLoading:A}=(0,Y.useQuery)(o.billing.getUserHashForCancelFlow.queryOptions({businessId:m.id,stripeCustomerId:x?.stripeCustomerId||""},{enabled:!!x&&y})),M=(0,a.useCallback)(async()=>{if(x&&N){if(p(R.PRODUCT_EVENTS.SETTINGS_SUBSCRIPTION_MANAGE_PLAN_CLICKED),C)return void c(N);u.push(N)}},[x,C,N,u,p]),L=(0,a.useCallback)(async()=>{if(x){if(p(R.PRODUCT_EVENTS.SETTINGS_SUBSCRIPTION_CANCEL_PLAN_CLICKED),!y)return S?C?void c(S):void u.push(S):void 0;j(null),(({stripeCustomerId:e,subscriptionId:s,userHash:a,onSupportRequest:i,onCancel:l})=>{window.churnkey.init("show",{subscriptionId:s,customerId:e,authHash:a,appId:"t4ambzx8t",mode:"live",provider:"stripe",record:!0,handleSupportRequest:()=>{i(),window.churnkey.hide()},onCancel:l})})({subscriptionId:x.stripeSubscriptionId,stripeCustomerId:x.stripeCustomerId,userHash:E||"",onSupportRequest:()=>f(!0),onCancel:()=>{let e=10,s=async()=>{await v.invalidateQueries({queryKey:o.billing.getSubscriptionByBusinessId.queryKey({businessId:m.id})});let a=v.getQueryData(o.billing.getSubscriptionByBusinessId.queryKey({businessId:m.id}));a?.cancelAtPeriodEnd&&e&&(e--,setTimeout(s,2e3))};s()}})}},[x,p,y,j,E,S,C,u,f,v,o,m.id]),F=(0,a.useCallback)(()=>{r(!0),p(R.PRODUCT_EVENTS.SETTINGS_SUBSCRIPTION_UPGRADE_CLICKED),b(R.GTM_EVENTS.PAYWALL_CLICKED)},[r,p,b]),U=y?A||!E:I||!S;return(0,s.jsxs)(w,{children:[(0,s.jsxs)(k,{children:[x?.stripe.plan.status==="trialing"&&(0,s.jsx)(B.Typography,{variant:"sm",className:"font-semibold",children:n("freeTrial")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(B.Typography,{variant:"sm",className:"font-semibold",children:[e.planName," ",t("plan")]}),(0,s.jsxs)(B.Typography,{variant:"sm",className:"font-medium",children:[(0,eS.formatMoney)({amount:e.planPrice,currencyCode:"USD"}),e.planPeriod===eP.StripePlanInterval.MONTHLY?`/${t("monthly").charAt(0)}`:`/${t("yearly").charAt(0)}`]})]}),(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium text-black/55",children:t("nextPayment",{date:(0,eS.formatDate)({date:e.periodEnd,format:"short"})})})]}),!l&&(0,s.jsxs)(P,{children:[x&&!C&&(x.stripe.plan.level<eP.StripePlanLevel.SCALE||x.stripe.plan.interval===eP.StripePlanInterval.MONTHLY)&&(0,s.jsx)(g.Button,{onClick:F,children:t("upgrade")}),(0,s.jsx)(g.Button,{disabled:T||!N,onClick:M,variant:"ghost",children:t("managePlan")}),(0,s.jsx)(g.Button,{disabled:U,onClick:L,variant:"ghost",children:t("cancelPlan")})]}),(0,s.jsx)(eI,{open:!!d,onOpenChange:()=>c(null),onConfirm:()=>{d&&u.push(d)}})]})},e_=({viewOnly:e})=>{let a=(0,i.useTranslations)("settings.subscription"),l=(0,D.useTRPC)(),{activeBusiness:t}=(0,_.useBusinessContext)(),{data:n,isLoading:r}=(0,Y.useQuery)(l.billing.createPortalSessionUrl.queryOptions({businessId:t.id,returnUrl:(0,eM.getCurrentUrl)()}));return(0,s.jsxs)(w,{variant:"destructive",children:[(0,s.jsx)(k,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium",children:a("failedPayment")})}),!e&&(0,s.jsx)(P,{children:!r&&n?(0,s.jsx)(ek.Link,{href:n,children:(0,s.jsx)(g.Button,{variant:"secondary",children:a("updateBilling")})}):(0,s.jsx)(g.Button,{disabled:!0,variant:"secondary",children:a("updateBilling")})})]})},eD=({viewOnly:e})=>{let l=(0,i.useTranslations)("settings.subscription"),{setOpen:t}=(0,ew.usePaywall)(),{track:n}=(0,O.useAnalytics)(),{track:r}=(0,eA.useGTM)(),o=(0,a.useCallback)(()=>{t(!0),n(R.PRODUCT_EVENTS.SETTINGS_SUBSCRIPTION_GET_STARTED_CLICKED),r(R.GTM_EVENTS.PAYWALL_CLICKED)},[t,n,r]);return(0,s.jsxs)(w,{variant:"info",children:[(0,s.jsx)(k,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium",children:l("freePlan")})}),!e&&(0,s.jsx)(P,{children:(0,s.jsx)(g.Button,{variant:"secondary",onClick:o,children:l("getStarted")})})]})},eL=({endDate:e,viewOnly:a})=>{let l=(0,i.useTranslations)("settings.subscription"),t=(0,D.useTRPC)(),{track:n}=(0,O.useAnalytics)(),{activeBusiness:r}=(0,_.useBusinessContext)(),{data:o,isLoading:d}=(0,Y.useQuery)(t.billing.createPortalSessionUrl.queryOptions({businessId:r.id,returnUrl:(0,eM.getCurrentUrl)()}));return(0,s.jsxs)(w,{variant:"warning",children:[(0,s.jsx)(k,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium",children:l("canceledPlan",{date:(0,eS.formatDate)({date:e,format:"short"})})})}),!a&&(0,s.jsx)(P,{children:!d&&o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ek.Link,{href:o,children:(0,s.jsx)(g.Button,{onClick:()=>n(R.PRODUCT_EVENTS.SETTINGS_SUBSCRIPTION_RENEW_PLAN_CLICKED),children:l("renewPlan")})}),(0,s.jsx)(ek.Link,{href:o,children:(0,s.jsx)(g.Button,{variant:"secondary",onClick:()=>n(R.PRODUCT_EVENTS.SETTINGS_SUBSCRIPTION_MANAGE_PLAN_CLICKED),children:l("managePlan")})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Button,{disabled:!0,children:l("renewPlan")}),(0,s.jsx)(g.Button,{disabled:!0,variant:"ghost",children:l("managePlan")})]})})]})},eR=({subscriptionDetails:e,hasEditPermission:a})=>e&&"canceled"!==e.subscriptionStatus?"past_due"===e.subscriptionStatus?(0,s.jsx)(e_,{viewOnly:!a}):e.willCancelAtPeriodEnd?(0,s.jsx)(eL,{endDate:e.periodEnd,viewOnly:!a}):["active","trialing"].includes(e.subscriptionStatus)?(0,s.jsx)(eB,{subscriptionDetails:e,viewOnly:!a}):null:(0,s.jsx)(eD,{viewOnly:!a}),eO=()=>{let e=(0,i.useTranslations)("settings.subscription"),a=(0,D.useTRPC)(),[l]=(0,eo.useSettings)(),{activeBusiness:t,isManager:n}=(0,_.useBusinessContext)(),{data:r,isLoading:o}=(0,Y.useQuery)(a.billing.getSubscriptionByBusinessId.queryOptions({businessId:t.id},{enabled:"subscription"===l}));return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(B.Typography,{variant:"2xl",className:"font-semibold",children:e("title")}),o?(0,s.jsx)(ee.Skeleton,{className:"bg-black/3 h-[68px] w-full overflow-hidden rounded-xl"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eR,{hasEditPermission:n,subscriptionDetails:r?{planName:r.stripe.plan.name,planPrice:r.stripe.plan.amount,planPeriod:r.stripe.plan.interval===eP.StripePlanInterval.MONTHLY?eP.StripePlanInterval.MONTHLY:eP.StripePlanInterval.YEARLY,subscriptionStatus:r.stripe.plan.status,periodEnd:r.stripe.plan.periodEnd,willCancelAtPeriodEnd:r.stripe.plan.willCancelAtPeriodEnd}:void 0}),!n&&(0,s.jsx)(B.Typography,{variant:"sm",className:"text-black/55",children:e("managerOnly")})]})]})},eF=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",width:"24",height:"24",...e,children:(0,s.jsx)("path",{d:"M15.93 2.836a1.25 1.25 0 0 1 1.67 1.228l-.02.176-2.196 11.86a1.25 1.25 0 0 1-1.972.777L7.5 12.51v2.267l.343-.249.064-.042a.75.75 0 0 1 .82 1.254l-.741.538v.001c-.826.604-1.985.011-1.986-1.01V11.4L3.308 9.41a1.25 1.25 0 0 1 .322-2.182h.001l12.3-4.393m-7.929 8.177 5.98 4.42 1.928-10.415zM4.578 8.48l2.167 1.603L12.67 5.59z"})}),eU=et.z.object({email:et.z.string().email("Invalid email address")}),ez=({open:e,onOpenChange:l,onSend:t,isSending:n})=>{let r=(0,i.useTranslations)("settings.team.invitation.modal"),o=(0,i.useTranslations)("common"),c=(0,u.useForm)({defaultValues:{email:""},mode:"onSubmit",resolver:(0,m.zodResolver)(eU)});return(0,a.useEffect)(()=>{e&&c.reset()},[c,e]),(0,s.jsx)(d.Credenza,{open:e,onOpenChange:l,children:(0,s.jsx)(d.CredenzaContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-6 py-7 sm:py-0",children:[(0,s.jsxs)(d.CredenzaHeader,{className:"p-0",children:[(0,s.jsx)(d.CredenzaTitle,{children:r("title")}),(0,s.jsx)(d.CredenzaDescription,{children:r("subtitle")})]}),(0,s.jsx)(u.FormProvider,{...c,children:(0,s.jsxs)("form",{onSubmit:c.handleSubmit(e=>{t(e.email)}),children:[(0,s.jsx)(f.TextFormField,{label:r("email.label"),placeholder:r("email.placeholder"),fieldName:"email",type:"email"}),(0,s.jsx)(g.Button,{disabled:n,type:"submit",loading:n,className:"mt-6 w-full",size:"lg",children:n?o("sending"):(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(eF,{}),r("buttonCta")]})})]})})]})})})};var eV=e.i(305477),eG=e.i(311993),eK=e.i(477130),eq=e.i(622589);let eQ=e=>!!e&&"userId"in e,eH=({member:e,onSelect:l,onDelete:t,onResend:n})=>{let r=(0,i.useTranslations)("settings.team"),o=(0,c.useIsMobile)(),{isManager:d}=(0,_.useBusinessContext)(),u=(0,a.useMemo)(()=>eQ(e)?e.name:"",[e]),m=(0,a.useMemo)(()=>!!eQ(e)&&"owner"===e.role,[e]);return(0,s.jsxs)(w,{onClick:o&&!m?()=>l(e):void 0,className:"group",children:[(0,s.jsx)(k,{children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(ej.Avatar,{size:"sm",children:(0,s.jsx)(ej.AvatarFallback,{children:(0,ey.getInitials)({name:u||e.email,length:1})})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(B.Typography,{className:"font-semibold text-black/80",children:u||e.email}),u&&(0,s.jsx)(B.Typography,{className:"text-black/55",children:e.email})]})]})}),(0,s.jsxs)(P,{children:[(0,s.jsx)(eK.Badge,{className:"ml-10 xl:ml-0",variant:eQ(e)||"expired"!==e.invitationStatus?"default":"destructive",children:r(eQ(e)?`roles.${e.role??"member"}`:`invitation.status.${e.invitationStatus}`)}),(n||t)&&!o&&!m&&d&&(0,s.jsxs)(eq.DropdownMenu,{children:[(0,s.jsx)(eq.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(g.Button,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,s.jsx)(eG.MoreIcon,{})})}),(0,s.jsxs)(eq.DropdownMenuContent,{children:[t&&(0,s.jsx)(eq.DropdownMenuItem,{className:"gap-1",onSelect:()=>t(e),children:r("invitation.remove")}),!eQ(e)&&n&&(0,s.jsx)(eq.DropdownMenuItem,{className:"gap-1",onSelect:()=>n(e),children:r("invitation.resend")})]})]})]})]})},eW=({open:e,onOpenChange:l,member:t,isRemoving:n,isSending:r,onRemove:o,onResend:c})=>{let u=(0,i.useTranslations)("settings.team.invitation"),m=(0,a.useMemo)(()=>eQ(t)?t.name:"",[t]);return t?(0,s.jsx)(d.Credenza,{open:e,onOpenChange:l,children:(0,s.jsx)(d.CredenzaContent,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden py-7 sm:py-0",children:[(0,s.jsxs)(d.CredenzaHeader,{className:"overflow-hidden",children:[(0,s.jsx)(d.CredenzaTitle,{className:"overflow-hidden text-ellipsis",children:m||t.email}),(0,s.jsx)(d.CredenzaDescription,{className:"hidden",children:u("description")})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)(g.Button,{variant:"ghost",size:"lg",loading:n,disabled:n,onClick:()=>o(t),children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(eV.XMarkIcon,{}),u("remove")]})}),!eQ(t)&&(0,s.jsx)(g.Button,{variant:"ghost",size:"lg",disabled:r,loading:r,onClick:()=>c(t),children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(eF,{}),u("resend")]})})]})]})})}):null};var e$=e.i(283107);let eY=({canUpgrade:e})=>{let l=(0,i.useTranslations)("settings.team"),t=(0,i.useTranslations)("common"),{canStartFreeTrial:n}=(0,e$.useFreeTrial)(),{setOpen:r}=(0,ew.usePaywall)(),{track:o}=(0,O.useAnalytics)(),{track:d}=(0,eA.useGTM)(),c=(0,a.useCallback)(()=>{r(!0),o(R.PRODUCT_EVENTS.ACCOUNT_PAYWALL_UPGRADE_CLICKED,{context:"teammates"}),d(R.GTM_EVENTS.PAYWALL_CLICKED)},[r,o,d]);return(0,s.jsxs)(w,{variant:"info",children:[(0,s.jsx)(k,{children:(0,s.jsx)(B.Typography,{variant:"sm",className:"font-medium",children:l(e?"upgradeToAdd":"maximumReached")})}),e&&(0,s.jsx)(P,{children:(0,s.jsx)(g.Button,{variant:"secondary",onClick:c,children:t(n?"startFreeTrial":"upgrade")})})]})};var eZ=e.i(32238);let eJ=()=>{let e=(0,i.useTranslations)("settings.team"),l=(0,i.useTranslations)("common"),t=(0,D.useTRPC)(),[n,r]=(0,a.useState)(void 0),[o,d]=(0,p.useQueryState)("inviting",p.parseAsBoolean),c=(0,h.useQueryClient)(),{activeBusiness:u,currentSubscription:m,isManager:j}=(0,_.useBusinessContext)(),{track:f}=(0,O.useAnalytics)(),[v]=(0,eo.useSettings)(),[C,y]=(0,a.useState)(!1),{data:N,isLoading:T}=(0,Y.useQuery)(t.invitation.getInvitations.queryOptions({businessId:u.id},{enabled:"team"===v})),{data:S,isLoading:I}=(0,Y.useQuery)(t.business.getMembers.queryOptions({businessId:u.id},{enabled:"team"===v})),E=(0,a.useMemo)(()=>{let e=S?.length??0,s=N?.length??0,a=e+s,i=a>=eZ.PLAN_LIMITS.BUSINESS.TEAM_MEMBERS;return{membersCount:e,invitationsCount:s,totalCount:a,isAtCapacity:i}},[S,N]),A=(0,a.useMemo)(()=>m&&m?.stripe?.plan?.level>=eZ.MIN_PLAN_LEVEL.TEAM_MEMBERS_INVITE&&!E.isAtCapacity,[m,E]),w=(0,a.useMemo)(()=>!m||m?.stripe?.plan?.level<eZ.MIN_PLAN_LEVEL.TEAM_MEMBERS_INVITE,[m]),k=(0,a.useCallback)(()=>{A?d(!0):(y(!0),f(R.PRODUCT_EVENTS.ACCOUNT_PAYWALL_TRIGGER_CLICKED,{context:"add_teammate"})),f(R.PRODUCT_EVENTS.SETTINGS_TEAM_ADD_TEAMMATE_CLICKED)},[A,d,f]),P=(0,x.useMutation)(t.business.removeUserFromBusiness.mutationOptions({onSuccess:()=>{b.toast.success(l("deleted")),c.invalidateQueries({queryKey:t.business.getMembers.queryKey({businessId:u.id})})},onError:e=>{b.toast.error(e?.message??l("failed"))}})),M=(0,x.useMutation)(t.invitation.removeInvitation.mutationOptions({onSuccess:()=>{b.toast.success(l("deleted")),c.invalidateQueries({queryKey:t.invitation.getInvitations.queryKey({businessId:u.id})})},onError:e=>{b.toast.error(e?.message??l("failed"))}})),L=(0,x.useMutation)(t.invitation.inviteToBusiness.mutationOptions({onSuccess:()=>{b.toast.success(l("sent")),c.invalidateQueries({queryKey:t.invitation.getInvitations.queryKey({businessId:u.id})})},onError:e=>{b.toast.error(e?.message??l("sentFailed"))}})),F=(0,a.useCallback)(({userId:e,email:s})=>{e?P.mutate({businessId:u.id,userId:e}):s&&M.mutate({businessId:u.id,email:s}),r(void 0)},[u.id,P,M]),U=(0,a.useCallback)(({email:e})=>{L.mutate({businessId:u.id,email:e}),r(void 0)},[u.id,L]);return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(ez,{open:!!o,onOpenChange:()=>d(null),isSending:L.isPending,onSend:e=>{L.mutate({businessId:u.id,email:e}),d(null),f(R.PRODUCT_EVENTS.SETTINGS_TEAM_SEND_INVITE_CLICKED)}}),(0,s.jsx)(eW,{open:!!n,onOpenChange:()=>r(void 0),member:n,isRemoving:P.isPending,isSending:L.isPending,onRemove:F,onResend:U}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)(B.Typography,{variant:"2xl",className:"font-semibold",children:e("title")}),j&&!E.isAtCapacity&&(0,s.jsx)(g.Button,{disabled:T,onClick:k,children:e("invitation.addMember")})]}),(C||E.isAtCapacity)&&(0,s.jsx)(eY,{canUpgrade:w}),I||T?(0,s.jsx)(ee.Skeleton,{className:"bg-black/3 h-[68px] w-full overflow-hidden rounded-xl"}):(0,s.jsxs)("ul",{className:"flex flex-col gap-2",children:[S?.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(eH,{member:{userId:e.users.id,email:e.users.email,role:e.members.role??"member",name:(0,ey.getFullName)({firstName:e.users.firstName,lastName:e.users.lastName})},onSelect:e=>r(e),onDelete:F})},e.users.id)),N?.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(eH,{member:{email:e.email,invitationStatus:e.expiresAt>new Date?"sent":"expired"},onSelect:e=>r(e),onResend:U,onDelete:F})},e.id))]})]})};e.s(["SettingsModal",0,()=>{let e=(0,i.useTranslations)("settings"),[u,m]=(0,eo.useSettings)(),x=(0,c.useIsMobile)(),h=(0,a.useMemo)(()=>[{name:"profile",title:e("profile.title"),icon:n.UserCircleIcon,Component:eT},{name:"businessDetails",title:e("businessDetails.title"),icon:l,Component:$},{name:"team",title:e("team.title"),icon:r.UserGroupIcon,Component:eJ},{name:"invoicing",title:e("invoicing"),icon:t.InvoiceIcon,Component:ed},{name:"subscription",title:e("subscription.title"),icon:o.WalletIcon,Component:eO}],[e]),p=(0,a.useMemo)(()=>h.find(e=>e.name===u),[u,h]);return(0,s.jsx)(d.Credenza,{open:!!u,onOpenChange:()=>m(null),children:(0,s.jsxs)(d.CredenzaContent,{className:"h-[640px] max-h-[90vh] w-[960px] max-w-full overflow-hidden bg-white p-0 backdrop-blur-2xl sm:max-w-full md:max-w-[90vw] md:bg-white/80",children:[(0,s.jsxs)(d.CredenzaHeader,{className:"hidden",children:[(0,s.jsx)(d.CredenzaTitle,{className:"hidden",children:p?.title||""}),(0,s.jsx)(d.CredenzaDescription,{className:"hidden",children:`${e("title")} | ${p?.title||""}`})]}),x?(0,s.jsx)(ep,{settings:h}):(0,s.jsx)(eh,{settings:h})]})})}],908451)},824456,e=>{"use strict";var s=e.i(16572),a=e.i(739582),i=e.i(269714),l=e.i(401181),t=e.i(183509);let n=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",width:"24",height:"24",...e,children:(0,s.jsx)("path",{d:"M10 12.75a.74.74 0 0 1-.53-.22L5.22 8.28a.75.75 0 1 1 1.06-1.06L10 10.94l3.72-3.72a.75.75 0 1 1 1.062 1.06l-4.25 4.25a.75.75 0 0 1-.53.22z"})});var r=e.i(709580),o=e.i(991565),d=e.i(432245),c=e.i(981831),u=e.i(111541),m=e.i(765918),x=e.i(860552),h=e.i(216246),p=e.i(479668),g=e.i(118767),b=e.i(139626);let j=()=>{let{businesses:e,activeBusiness:s,setActiveBusiness:a}=(0,h.useBusinessContext)(),i=(0,g.useRouter)(),{track:t}=(0,p.useAnalytics)(),n=(0,l.useCallback)(e=>{a(e),i.push((0,b.getBusinessUrl)(e.slug))},[a,i]),r=(0,l.useCallback)(()=>{i.push("/b/onboarding"),t(x.PRODUCT_EVENTS.BUSINESS_SELECTOR_ADD_BUSINESS_CLICKED)},[i,t]),o=(0,l.useMemo)(()=>e.filter(e=>e.id!==s.id),[e,s]);return{activeBusiness:s,filteredBusinesses:o,handleSelectBusiness:n,handleAddBusiness:r}};var f=e.i(446052),v=e.i(985837);let C=()=>{let[e,a]=(0,l.useState)(!1),h=(0,t.useTranslations)("dashboard.business"),{activeBusiness:g,filteredBusinesses:b,handleSelectBusiness:C,handleAddBusiness:y}=j(),{track:N}=(0,p.useAnalytics)(),{signOut:T}=(0,f.useSignOut)(x.PRODUCT_EVENTS.ACCOUNT_LOGOUT),S=(0,l.useCallback)(e=>{C(e),a(!1)},[C]),I=(0,l.useCallback)(()=>{y(),a(!1)},[y]);return(0,s.jsxs)(u.Popover,{open:e,onOpenChange:a,children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between gap-2",children:[(0,s.jsx)(u.PopoverTrigger,{asChild:!0,children:(0,s.jsxs)(c.Button,{variant:"ghost",className:"text-black/80",onClick:()=>N(x.PRODUCT_EVENTS.BUSINESS_SELECTOR_CLICKED),"data-testid":"business-selector-trigger",children:[(0,s.jsx)("span",{className:"max-w-36 truncate",children:g.name}),(0,s.jsx)(n,{})]})}),(0,s.jsx)(i.SidebarTrigger,{})]}),(0,s.jsx)(u.PopoverContent,{className:"w-64 rounded-2xl p-0",align:"start",children:(0,s.jsxs)("div",{className:"flex max-h-[calc(100vh-10rem)] flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 px-1 py-4",children:[(0,s.jsx)(d.Avatar,{variant:"square",children:(0,s.jsx)(d.AvatarFallback,{children:(0,v.getInitials)({name:g.name,length:1})})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:g.name})]}),(0,s.jsx)(m.Separator,{}),!!b?.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"max-h-72 min-h-11 overflow-y-auto p-1",children:b?.map(e=>(0,s.jsx)(u.PopoverItem,{onClick:()=>S(e),"data-testid":`business-selector-business-${e.id}`,children:(0,s.jsx)("span",{className:"line-clamp-1",children:e.name})},e.id))}),(0,s.jsx)(m.Separator,{})]}),(0,s.jsxs)("div",{className:"p-1",children:[(0,s.jsxs)(c.Button,{variant:"ghost",className:"w-full justify-start",onClick:I,children:[(0,s.jsx)(r.PlusIcon,{}),(0,s.jsx)("span",{children:h("selector.addBusiness")})]}),(0,s.jsxs)(c.Button,{variant:"ghost",className:"w-full justify-start",onClick:T,children:[(0,s.jsx)(o.SignOutIcon,{}),(0,s.jsx)("span",{children:h("selector.logout")})]})]})]})})]})},y=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",width:"24",height:"24",...e,children:(0,s.jsx)("path",{d:"M7.78 5.78a.75.75 0 0 0-1.06-1.06l-2.5 2.5a.75.75 0 0 0 0 1.06l2.5 2.5a.75.75 0 1 0 1.06-1.06L6.56 8.5h4.19a.75.75 0 0 0 0-1.5H6.56zM13.28 9.22a.75.75 0 1 0-1.06 1.06l1.22 1.22H9.25a.75.75 0 0 0 0 1.5h4.19l-1.22 1.22a.75.75 0 1 0 1.06 1.06l2.5-2.5a.75.75 0 0 0 0-1.06z"})});var N=e.i(421061),T=e.i(47919);let S=()=>{let[e,a]=(0,l.useState)(!1),i=(0,t.useTranslations)("dashboard.business"),{activeBusiness:n,filteredBusinesses:o,handleSelectBusiness:u,handleAddBusiness:m}=j(),{track:h}=(0,p.useAnalytics)(),g=(0,l.useMemo)(()=>[n,...o],[n,o]),b=(0,l.useCallback)(e=>{e.id!==n.id&&u(e),a(!1)},[u,n.id]),f=(0,l.useCallback)(()=>{m(),a(!1)},[m]),C=(0,l.useCallback)(e=>{a(e)},[a]);return(0,s.jsxs)(N.Drawer,{open:e,onOpenChange:C,children:[(0,s.jsxs)(N.DrawerTrigger,{className:"flex items-center justify-between gap-2 rounded-b-none rounded-t-3xl bg-black/5 p-4 text-black/80",onClick:()=>h(x.PRODUCT_EVENTS.BUSINESS_SELECTOR_CLICKED),"data-testid":"business-selector-trigger",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Avatar,{variant:"square",size:"md",children:(0,s.jsx)(d.AvatarFallback,{className:"text-xs",children:(0,v.getInitials)({name:n.name})})}),(0,s.jsx)("div",{className:"max-w-44 truncate text-base font-medium md:text-sm",children:n.name})]}),(0,s.jsx)(y,{className:"text-black/55"})]}),(0,s.jsxs)(N.DrawerContent,{className:"h-auto max-h-[80vh]","data-testid":"business-selector-mobile-drawer",children:[(0,s.jsx)(N.DrawerHeader,{className:"px-2 pb-3 pt-8",children:(0,s.jsx)(N.DrawerTitle,{className:"text-left text-xl font-semibold text-black/90",children:i("selector.title")})}),(0,s.jsx)(T.List,{className:"no-scrollbar max-h-[calc(90vh-10rem)] overflow-y-auto py-3",children:g.map(e=>(0,s.jsx)(T.ListItem,{selected:e.id===n.id,showSelectedIcon:!0,onClick:()=>b(e),"data-testid":`business-selector-business-${e.id}`,children:(0,s.jsx)("span",{className:"truncate px-1",children:e.name})},e.id))}),(0,s.jsxs)(c.Button,{size:"lg",className:"mt-3 w-full","data-testid":"add-business-button",onClick:f,children:[(0,s.jsx)(r.PlusIcon,{className:"size-5"}),i("selector.addBusiness")]})]})]})};e.s(["BusinessSelector",0,()=>{let{isMobile:e}=(0,i.useSidebar)(),{isHydrated:l}=(0,a.useHydration)();return l?e?(0,s.jsx)(S,{}):(0,s.jsx)(C,{}):(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-7 w-28 rounded-2xl bg-black/10"})})}],824456)},971147,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(854833),l=e.i(183509),t=e.i(373411),n=e.i(169229),r=e.i(285219),o=e.i(825752),d=e.i(366836),c=e.i(560725),u=e.i(477130),m=e.i(269714),x=e.i(860552),h=e.i(216246),p=e.i(479668),g=e.i(118767),b=e.i(771158),j=e.i(236693);e.s(["NavChats",0,()=>{let e=(0,l.useTranslations)(),f=(0,g.usePathname)(),{activeBusiness:v}=(0,h.useBusinessContext)(),{isMobile:C,setOpenMobile:y}=(0,m.useSidebar)(),{track:N}=(0,p.useAnalytics)(),T=(0,b.useTRPC)(),{data:S,isLoading:I}=(0,i.useQuery)(T.chat.getChats.queryOptions({businessId:v.id},{enabled:!!v.id})),{data:E,refetch:A}=(0,i.useQuery)({...T.chat.hasActiveDeepResearch.queryOptions({businessId:v.id}),refetchInterval:e=>e.state.data?.hasActiveDeepResearch?1e4:12e4});(0,a.useEffect)(()=>{S?.chats&&A()},[S?.chats,A]);let w=(0,a.useMemo)(()=>{let e={general:null,marketing:null,finance:null,sales:null,customer:null,research:null};return S&&S.chats.forEach(s=>{(!e[s.context]||e[s.context].updatedAt<s.updatedAt)&&(e[s.context]=s)}),e},[S]),k=(0,a.useMemo)(()=>[{key:"general",title:e("chats.general"),url:(0,j.getChatUrlForContext)({businessSlug:v.slug,context:"general"}),icon:t.ChatIcon},{key:"marketing",title:e("chats.marketing"),url:(0,j.getChatUrlForContext)({businessSlug:v.slug,context:"marketing"}),icon:r.EarthIcon},{key:"finance",title:e("chats.finance"),url:(0,j.getChatUrlForContext)({businessSlug:v.slug,context:"finance"}),icon:n.CurrencyIcon},{key:"sales",title:e("chats.sales"),url:(0,j.getChatUrlForContext)({businessSlug:v.slug,context:"sales"}),icon:c.WalletIcon},{key:"research",title:e("chats.research"),url:(0,j.getChatUrlForContext)({businessSlug:v.slug,context:"research"}),icon:d.PersonIcon}],[v.slug,e]),P=(0,a.useCallback)(e=>f.startsWith(e),[f]),M=(0,a.useCallback)(e=>{N(x.PRODUCT_EVENTS.SIDEBAR_ITEM_CLICKED,{item_name:`chat_${e}`}),C&&y(!1)},[N,C,y]),B=(0,a.useCallback)(e=>{let s=w[e];return!s||I?(0,j.getChatUrlForContext)({businessSlug:v.slug,context:e}):(0,j.getChatUrlForContext)({businessSlug:v.slug,context:e,chatId:s.id})},[w,v.slug,I]);return(0,s.jsxs)(m.SidebarGroup,{children:[(0,s.jsxs)(m.SidebarGroupLabel,{children:[(0,s.jsx)("span",{children:e("breadcrumbs.chat")}),(0,s.jsx)(u.Badge,{children:e("common.beta")})]}),(0,s.jsx)(m.SidebarMenu,{children:k.map(e=>(0,s.jsxs)("div",{className:"relative flex flex-row items-center justify-between",children:[(0,s.jsx)(m.SidebarMenuItem,{children:(0,s.jsx)(g.Link,{href:B(e.key),className:"flex w-full items-center gap-1",suppressHydrationWarning:!0,children:(0,s.jsxs)(m.SidebarMenuButton,{tooltip:e.title,isActive:P(e.url),onClick:()=>M(e.key),className:"flex-1",children:[e.icon&&(0,s.jsx)(e.icon,{}),(0,s.jsx)("span",{children:e.title})]})})},e.key),"research"===e.key&&E?.hasActiveDeepResearch&&!P(e.url)&&(0,s.jsx)(o.LoaderIcon,{className:"size-5 animate-spin text-black/55"})]},e.key))})]})}])},226401,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(183509);let l=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",width:"24",height:"24",...e,children:[(0,s.jsx)("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.55,strokeWidth:1.5,d:"m12.286 5.715-1.871 4.699-4.7 1.87 1.872-4.698zM9 3.75v-2M14.25 9h2M9 14.25v2M3.75 9h-2"}),(0,s.jsx)("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.55,strokeWidth:1.5,d:"M9 16.25a7.25 7.25 0 1 0 0-14.5 7.25 7.25 0 0 0 0 14.5"})]}),t=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"24",height:"24",...e,children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.941 2.357a1.75 1.75 0 0 1 2.118 0l5.25 3.99c.436.331.691.847.691 1.393v7.254a2.75 2.75 0 0 1-2.75 2.75h-8.5A2.75 2.75 0 0 1 3 14.994V7.74c0-.547.256-1.063.692-1.393zM4.6 7.54l5.25-3.99a.25.25 0 0 1 .302 0l5.25 3.99a.25.25 0 0 1 .099.199v7.254c0 .69-.56 1.25-1.25 1.25h-3.5v-2.75a.75.75 0 0 0-1.5 0v2.75h-3.5c-.69 0-1.25-.56-1.25-1.25V7.74a.25.25 0 0 1 .099-.199",clipRule:"evenodd"})});var n=e.i(623246),r=e.i(359555),o=e.i(748216),d=e.i(197809),c=e.i(477130),u=e.i(269714),m=e.i(860552),x=e.i(216246),h=e.i(499671),p=e.i(479668),g=e.i(118767),b=e.i(844653),j=e.i(139626);e.s(["NavMain",0,()=>{let e=(0,i.useTranslations)(),f=(0,g.usePathname)(),{activeBusiness:v,currentSubscription:C}=(0,x.useBusinessContext)(),{isMobile:y,setOpenMobile:N}=(0,u.useSidebar)(),{track:T}=(0,p.useAnalytics)(),{discoverabilityPreAlphaFlag:S,discoverabilityAlphaScreenFlag:I}=(0,h.useFlags)(),E=S||I&&C&&C.stripe.plan.level>=b.StripePlanLevel.STARTER,A=(0,a.useMemo)(()=>[{key:"home",title:e("breadcrumbs.home"),url:(0,j.getBusinessUrl)(v.slug),icon:t},{key:"website",title:e("breadcrumbs.website"),url:`${(0,j.getBusinessUrl)(v.slug)}/website`,icon:o.LayoutGridIcon},{key:"contacts",title:e("breadcrumbs.contacts"),url:`${(0,j.getBusinessUrl)(v.slug)}/contacts`,icon:d.UserCircleIcon},...E?[{key:"discoverability",title:e("breadcrumbs.discoverability"),url:`${(0,j.getBusinessUrl)(v.slug)}/discoverability`,icon:l,alpha:!0}]:[],{key:"invoices",title:e("breadcrumbs.invoices"),url:`${(0,j.getBusinessUrl)(v.slug)}/invoices`,icon:r.InvoiceIcon},{key:"studio",title:e("breadcrumbs.studio"),url:`${(0,j.getBusinessUrl)(v.slug)}/studio`,icon:n.ImageSparkleIcon}],[e,v.slug,E]),w=(0,a.useCallback)((e,s=!1)=>(!s||f===e)&&f.startsWith(e),[f]),k=(0,a.useCallback)(e=>{T(m.PRODUCT_EVENTS.SIDEBAR_ITEM_CLICKED,{item_name:e}),y&&N(!1)},[T,y,N]);return(0,s.jsx)(u.SidebarGroup,{children:(0,s.jsx)(u.SidebarMenu,{children:A.map((a,i)=>(0,s.jsx)(g.Link,{href:a.url,children:(0,s.jsxs)(u.SidebarMenuItem,{className:"flex items-center gap-1",children:[(0,s.jsxs)(u.SidebarMenuButton,{tooltip:a.title,isActive:w(a.url,0===i),onClick:()=>k(a.key),children:[a.icon&&(0,s.jsx)(a.icon,{}),(0,s.jsx)("span",{children:a.title})]}),a.beta&&(0,s.jsx)(c.Badge,{children:e("common.beta")}),a.alpha&&(0,s.jsx)(c.Badge,{children:e("common.alpha")})]},a.title)},`${a.key}-${i}`))})})}],226401)},855010,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(183509),l=e.i(500182),t=e.i(392661),n=e.i(269714),r=e.i(463377),o=e.i(860552),d=e.i(479668),c=e.i(218683);e.s(["NavSecondary",0,()=>{let e=(0,i.useTranslations)(),{isMobile:u,setOpenMobile:m}=(0,n.useSidebar)(),[x,h]=(0,c.useSettings)(),[p,g]=(0,r.useSupport)(),{track:b}=(0,d.useAnalytics)(),j=(0,a.useMemo)(()=>[{key:"settings",title:e("breadcrumbs.settings"),onClick:()=>h("list"),icon:t.WrenchScrewdriverIcon},{key:"help",title:e("breadcrumbs.help"),onClick:()=>g(!0),icon:l.QuestionIcon}],[e,h,g]),f=(0,a.useCallback)(e=>{e.onClick(),u&&m(!1),b(o.PRODUCT_EVENTS.SIDEBAR_ITEM_CLICKED,{item_name:e.key})},[b,u,m]);return(0,s.jsx)(n.SidebarGroup,{children:(0,s.jsx)(n.SidebarMenu,{children:j.map(e=>(0,s.jsx)(n.SidebarMenuItem,{children:(0,s.jsxs)(n.SidebarMenuButton,{tooltip:e.title,onClick:()=>f(e),children:[e.icon&&(0,s.jsx)(e.icon,{}),(0,s.jsx)("span",{children:e.title})]})},e.title))})})}])},445246,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(75871),l=e.i(893166),t=e.i(183509),n=e.i(810756),r=e.i(981831),o=e.i(109107),d=e.i(860552),c=e.i(216246),u=e.i(479668),m=e.i(879403),x=e.i(118767),h=e.i(283107),p=e.i(106378);e.s(["UpgradeCta",0,()=>{let e=(0,t.useTranslations)("sidebar.upgrade"),{setOpen:g}=(0,p.usePaywall)(),{track:b}=(0,u.useAnalytics)(),{canStartFreeTrial:j}=(0,h.useFreeTrial)(),{currentSubscription:f,isLoadingSubscription:v}=(0,c.useBusinessContext)(),C=(e=>{let s=(0,x.usePathname)(),a=(0,m.useParams)(),{afterParam:i,segmentIndex:l=0,returnAll:t=!1,defaultValue:n}=e,r=a[i];if(!r)return t?[]:n||null;let o=Array.isArray(r)?r[0]:r,d=s.split("/").filter(Boolean),c=d.findIndex(e=>e===o);if(-1===c)return t?[]:n||null;let u=d.slice(c+1);return t?0===u.length&&n?[n]:u:u[l]||n||null})({afterParam:"businessSlug",returnAll:!0,defaultValue:"home"}),y=(0,a.useMemo)(()=>C?Array.isArray(C)&&C.length>0?C[C.length-1]:C.toString():"",[C]),N=(0,a.useCallback)(()=>{g(!0),b(d.PRODUCT_EVENTS.SIDEBAR_UPGRADE_CLICKED,{context:y})},[g,y,b]);return(0,s.jsx)(i.AnimatePresence,{children:!v&&!f&&(0,s.jsxs)(l.motion.div,{className:"flex flex-col gap-1 rounded-2xl p-1 shadow-lg ring ring-black/5 max-md:hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1 p-2",children:[(0,s.jsx)(o.Typography,{variant:"sm",className:"font-medium",children:e("title")}),(0,s.jsx)(o.Typography,{variant:"sm",className:"text-black/55 [@media(max-height:680px)]:hidden",children:e("description")})]}),(0,s.jsxs)(r.Button,{theme:"dark",size:"sm",className:"w-full",onClick:N,children:[(0,s.jsx)(n.UpgradeIcon,{}),(0,s.jsx)("span",{children:e(j?"buttonVariant":"button")})]})]})})}],445246)},85966,e=>{"use strict";var s=e.i(16572),a=e.i(787108),i=e.i(981831),l=e.i(181241);e.s(["PromptTestBanner",0,({testLabel:e})=>(0,s.jsx)(l.TooltipProvider,{children:(0,s.jsx)("div",{className:"relative mx-2 mb-2 rounded-2xl border-b border-amber-200 bg-amber-100 py-1 pl-4 pr-2",children:(0,s.jsxs)(l.Tooltip,{delayDuration:0,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)(l.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-1",children:[(0,s.jsx)("span",{className:"text-xs text-amber-800",children:"Prompt tests enabled"}),(0,s.jsx)(a.InfoCircleIcon,{className:"h-3 w-3 text-amber-600"})]})}),(0,s.jsx)(i.Button,{variant:"ghost",size:"default",onClick:()=>{document.cookie="promptTestConfig=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.reload()},className:"text-xs",children:"Clear"})]}),(0,s.jsx)(l.TooltipContent,{sideOffset:10,children:(0,s.jsxs)("p",{className:"text-xs",children:["Prompt test label: "," ",(0,s.jsx)("i",{children:e})]})})]})})})])},395416,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(854833),l=e.i(183509),t=e.i(981831),n=e.i(922036),r=e.i(727191),o=e.i(216246),d=e.i(124793),c=e.i(771158),u=e.i(162341),m=e.i(158956);let x=(0,a.memo)(()=>{let{activeBusiness:e}=(0,o.useBusinessContext)(),x=(0,c.useTRPC)(),h=(0,a.useRef)(null),{route:p,setRoute:g,setSessionReady:b}=(0,u.useV1AuthIframeStore)(),j=(0,l.useTranslations)("dashboard"),{data:f}=(0,i.useQuery)(x.v1.token.queryOptions({businessId:e.mongoBusinessId,businessName:e.name}));(0,a.useEffect)(()=>{g("login")},[g]);let v=(0,a.useMemo)(()=>"login"===p&&f?`https://inapp.durable.co/login/via-token?token=${encodeURIComponent(f)}`:"logout"===p?"https://inapp.durable.co/logout":"about:blank",[p,f]);return(0,a.useEffect)(()=>{h.current&&(h.current.src=v)},[v]),(0,d.useIframeMessage)({eventKey:r.IframeEventKeys.SESSION_UPDATED,iframeRef:h,onMessage(e){if("error"===e.status){m.logger.error("v1 auth iframe session update error",e.error),n.toast.error(j("v1AuthErrorToast.message"),{action:(0,s.jsx)(t.Button,{variant:"secondary",onClick:()=>window.location.reload(),children:j("v1AuthErrorToast.action")}),duration:1/0,id:"v1-auth-iframe-session-update-error"});return}"ready"===e.status?b(!0):b(!1)}}),(0,s.jsx)("iframe",{ref:h,"data-testid":"v1-website",src:"about:blank",className:"hidden h-0 w-0"})});x.displayName="V1Auth",e.s(["V1Auth",0,x])},344329,e=>{"use strict";var s=e.i(16572),a=e.i(401181),i=e.i(444648);let l=(0,i.default)(async()=>(await e.A(807925)).PaywallModal,{loadableGenerated:{modules:[739398]},ssr:!1}),t=(0,i.default)(async()=>(await e.A(182961)).FailedPaymentModal,{loadableGenerated:{modules:[325100]},ssr:!1}),n=(0,i.default)(async()=>(await e.A(597511)).SubscriptionSuccessModal,{loadableGenerated:{modules:[490986]},ssr:!1}),r=(0,i.default)(async()=>(await e.A(725650)).SupportModal,{loadableGenerated:{modules:[836478]},ssr:!1}),o=(0,i.default)(async()=>(await e.A(373146)).LiveChatProvider,{loadableGenerated:{modules:[949754]},ssr:!1});e.s(["DashboardModals",0,()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{}),(0,s.jsx)(r,{}),(0,s.jsx)(t,{}),(0,s.jsx)(n,{}),(0,s.jsx)(a.Suspense,{children:(0,s.jsx)(o,{})})]})])}]);

//# sourceMappingURL=b83495c0783a84ec.js.map
//# chunkId=019a9487-df41-7b03-a942-84d07153f626